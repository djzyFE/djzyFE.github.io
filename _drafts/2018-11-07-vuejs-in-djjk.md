---
layout: post 
title: Vue.js在大家健康项目中的应用
author: 卫东升
tags: 大家健康 Vue
---


[TOC]

## 项目背景

提纲：

* 简单介绍大家健康的产品背景
* 大家健康前端技术架构演变
* 当前大家健康面临的问题和挑战
* 为什么要用Vue.js进行大家健康的重构

大家健康是一个患者使用的微信公众号。患者可以通过这个微信公众号和医生进行互动（医生端是一个APP），包括医生聊天、填写问诊单、查看方案、购药、随访、查看个人病历等等一系列线上医患沟通流程，都可以在这个公众号上完成。下面展示几张当前产品的页面截图。

![大家健康部分页面展示](/img/201811/djjk-intro.jpg)

内部的绝大多数页面（包括公众号菜单、模版消息、图文消息等等）都是一个单页应用。

大致描述下重构之前（也就是当前的线上）的项目情况：
* 整个项目是一个SPA应用，并且通过webpack进行项目的构建和打包；
* 项目遵循CommonJS规范，以模块化的方式组织项目文件和代码。总体上按照页面为维度，将项目划分为各个子目录，每个子目录内都有对应页面相关的一些资源（ejs/less/js）。
* 一些公共模块，会抽象成组件放在components目录下，比如上传图片组件、医生信息TitleBar；一些公众的方法会集中到一个js文件里（比如配置信息、api接口、help方法、等等）

  



重构前的技术栈（webpack/ejs/less/js）, 通过CommonJS require的方式，组织各个模块。
  根据页面分了各个modules，同时一些公共的模块抽象成组件。

老架构的一些问题：
1. 模块化不是很规范。
两个模块或组件，A和B，理论上A和B之前的HTML/CSS/JS都应该是相互独立，不应该存在
 存在A的js逻辑直接修改B中DOM。这个问题存在的原因是由于，修改
##Vue.js实践

* Vue及部分三方库

这里列举写在大家中医
* Vuex

* Vue-Router

* 单元测试

  ​

##总结 

* 项目机遇Vue.js的重构的收益

  ​